# NFL Fantasy Trade Analysis Tool

## Programme structure
This is all programmed using Python, with a SQL (Postgres) Database. The REST API is built with FastAPI, and the database is handled using Alembic migrations and SQLAlchemy with Pydantic as an ORM. The function is, once the league has been created, teams added, and players added per team in the database you can model run the trading function to identify statistically well-founded trades (elaborated on below).



## Well-Foundedness in a trade
A trade is considered statistically well-founded if it is of statistical benefit to both participants. In the case where this is not true, one of the teams reasoning for taking such as trade must be purely contextual and therefore not worth identifying using a tool, but rather whatever that context is. To give an example, consider the following situation. Suppose both team A and team B have 2 quarterbacks and 2 tight ends (QB and TE from here on out), and the rules are such that only 1 QB and 1 TE can start (no superflex). Team A's QBs have the projected weekly points of 20 and 18 (the better being labelled QB1, the bench player being QB2), and team A's TEs have a projection of 8 and 6 points, giving a projected combined starter value of 28 points per week. Team B, on the other hand, has their QBs with 18 and 15 points, TEs with 12 and 11 points, for a combined 30 starter points per week. In this scenario, if both teams traded their QB1 and TE1 to one another, team A ends up with QBs 18 and 18, TEs 12 and 6 for a total of 30 points per week. Team B now has QBs 20 and 15 with TEs 11 and 8, giving a total of 31 points per week. Both teams have had an increase in their expected points per week, but this is a trade that would often not be considered for the following reasons:
1. Quarterbacks are more valuable than tight ends, offering far more raw points. The thing is, raw points do not matter but rather points over replacement.
2. This is a trade involving a lot of starters, often avoided.

Team B here could try to shift the trade further in their favour by offering TE 2, increasing them to 32 points and decreasing team A to 29 points, still beneficial for both but better for team B, but likewise team A could demand TE 1. This will come down to the context of who is in the trade, who needs it more etc. This tool should not be taken as identifying every possible trade, but rather highlighting position groups where a mutually beneficial trade exists between two teams, the fine details can be tweaked freely.

## Limitations
The main limitation here is that this tool is heuristic, it does not consider every single trade possibility as this information space grows factorially with trade size. Instead, it considers 2 for 2 trades between positions where each team has leverage (so all pairs that can be formed from the cartesian product of team A's leverage over B with team B's leverage over A). Once again, this is not a tool to identify every single possible trade, but rather a particular class of easily missed trade.

## Data
The data has been gathered from https://www.fantasypros.com/nfl/rankings/qb.php



In this project I consider a valid trade one which is statistically grounded for both individuals. If a trade is to the negative of one I deem it not statistically grounded. This is not to say it cannot happen, but is to say it is based on some meta-reasoning rather than the standard projection. The way a trade can be mutually beneficial is if someone can replace a starter with their bench player for a small loss in points, that is more than made up for by getting a big improvement elsewhere in the team in the trade in which they lose their starter. Trades where you directly trade a bench player for someone that would be a starter for you are obvious and do not require analysis to identify, as there is clear benefit for you. This obviously means this will not identify every possible trade, as this could be anything and requires far more context than can be programmed, but this will heuristically identify some trades that fit in the following criteria:

Suppose team A has 2 QB and 2 TE, as does team B. The league rules are set up such that teams have 1 starting QB and 1 starting TE. Suppose team A's players are projected (on a per week basis) the following: QB1-22 pts, QB2-19 pts, TE1-8 pts, TE2-6 pts for a projected starting total of 30 pts. Meanwhile, team B's players are projected: QB1-20 pts, QB2-16 pts, TE1-12 pts, TE2-11 pts for a projected starting total of 32 pts.
If then the teams do the following trade: A gives B QB1 and TE1, B gives A QB1 and TE1 then the teams projected starting goes to A = 32 pts and B = 33 pts. Both teams have profited from this, but it isn't a trade you'd initially consider as it involves trading starters and the raw total points makes you on face value reconsider (as QB are worth more than TE, a trade where you downgrade QB to upgrade TE may seem bad, but in actuality all that matters is points-over-replacement). This is what I mean by a statistically well-founded trade, and is what I hope to identify in this scenario.

Some of the limitations I place are that trades are either 1 for 1 or 2 for 2. The reason I do this is trades involving 3 players from one team are rare and it is almost a guarantee that one of the players being traded is a bench player on both teams, in which case they are somewhat redundant and the reasoning is either to add depth to a position or for some contextual reason. The player can freely alter these trades as they please and add 3rds if they so please/are required to to get the trade accepted, this is an area the player does not need any help. Likewise some trades may be 2 for 1, but the 2 for 2 should completely contain this by simply doing the 2 for 1 trade with a random bench player that once again can be freely removed by the player, no support needed. This is not a be-all and end-all, but rather a tool to save some time and identify possible trading avenues you may miss. Without the context of the people trading it is not possible to completely determine viable trades, just demonstrate that a trade involving your star player might actually be worth it, you can then work out the fine details.